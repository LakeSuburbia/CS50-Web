{% extends "auctions/layout.html" %}

{% block body %}
    <h2>{{ product }}</h2>
    <img src="{{ image }}" alt="image" style="width: 300px; height: auto">
    
    <p>{{seller}} is selling {{product}} for a minimum price of {{price}} euro.</p>
    <br>
    <h5>description: </h5>
    <p>{{description}}</p>
    <span style="font-size:smaller">
        <p>Seller: {{seller}}
            <br>
        Current price: {{price}}
            <br>
        Category: {{category}}
            <br>
        Highest bidder: {{newOwner}}
    </p>
    </span>
    <br>
    {% if user.is_authenticated and active %}
        {% if user == seller %}
            <div class="form-wrapper">
                <form action="{% url 'deactivateProduct' id %}" method="post">
                    {% csrf_token %}
                    <input class="btn btn-primary" type="submit" value="deactivate">
                </form>
            </div>
        {% else %}
            <div class="form-wrapper">
                <form action="{% url 'bid' id %}" method="post">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <input class="form-control" type="number" name="price" placeholder="bid" min="{{price|add:1}}">
                    </div>

                    <input class="btn btn-primary" type="submit" value="bid">
                </form>
            </div> 
        {% endif %}
    {% elif active %}
        <p><i>If you want to bid, you need to login first</i></p>
    {% else %}
        {% if newOwner == seller %}
            <p><i>This listing is closed. No one bought {{product}}</i></p>
        {% elif newOwner == user %}
            <p><i> Congratulations! You are the new owner of {{product}}! </i></p>
        {% else %}
        <p><i>This listing is closed. {{newOwner}} is the new owner of {{product}}</i></p>
        {% endif %}
        
    {% endif %}

    
{% endblock %}